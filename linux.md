## Linux目录结构

![image-20210603110812844](C:\Users\enslaver\AppData\Roaming\Typora\typora-user-images\image-20210603110812844.png)

1) root : 该目录为系统管理员目录，root 是具有超级权限的用户。 

2) <u>***bin ->usr/bin***</u> : 存放系统预装的可执行程序，这里存放的可执行文件可以在系统的任何目录下执行。

3) usr 是 linux 的系统资源目录，里边存放的都是一些系统可执行文件或者系统以来的一些文件库。 

4) ***<u>usr/local/bin</u>***：存放用户自己的可执行文件，同样这里存放的可执行文件可以在系统的任何目录下执行。

5) lib->usr/lib: 这个目录存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件，几乎所有 的应用程序都需要用到这些共享库。 

6) boot : 这个目录存放启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。

7) dev: dev 是 Device(设备)的缩写, 该目录下存放的是 Linux 的外部设备，Linux 中的设备也是以文件的形式存在。

8) ***<u>etc</u>***: 这个目录存放所有的系统管理所需要的配置文件，例如环境变量。

9) ***<u>home</u>***：用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名以用户的账号命名，叫作用 户的根目录；用户登录以后，默认打开自己的根目录。

10) var : 这个目录存放着在不断扩充着的东西，我们习惯将那些经常被修改的文件存放在该目录下，比如运行的 各种日志文件。 

11) mnt : 系统提供该目录是为了让用户临时挂载别的文件系统，我们可以将光驱挂载在/mnt/上，然后进入该目 录就可以查看光驱里的内容

12) ***<u>opt</u>***: 这是给 linux 额外安装软件所存放的目录。比如你安装一个 Oracle 数据库则就可以放到这个目录下，默认 为空。

 13) tmp: 这个目录是用来存放一些临时文件的。

## Linux远程操作

### 使用vi和vim:

#### 三种模式

一般模式：只能查看不能编辑；

编辑模式：在一般模式下按i或a或I或A进入，可以编辑不能保存，按esc回到一般模式；

命令模式：在一般模式下按:进入命令模式

​						q！表示不保存且强制退出

​						wq保存并退出

​						q表示不编辑情况下只是退出



#### 快捷键

**复制粘贴行：**一般模式下按yy可复制光标所在行，按p把剪切板内容粘贴到下一行；

**复制当前行往下5行：**一般模式下按5yy；

**在文本文件中查找关键字：**命令行模式下输入/关键字，回车，按n表示查找下一个关键字；

**删除光标当前所在行：**一般模式下按dd；

**删除光标当前所在往下5行：**一般模式下按5dd；

**撤销上次编辑的内容：**一般模式下按u；

**显示行号：**命令行模式下设置文件的行号set nu，取消行号set nonu；



#### 管理用户

**添加用户**useradd lisi

​	-> 创建一个用户lisi

​	->在/home目录下创建一个用户的根目录，目录名称默认跟用户名相同

​	->创建一个组lisi，或将用户放入指定组中

**添加用户时指定所属的主组**useradd -g 组名 用户名

**设置密码**passwd lisi

​	->密码需要满足一定复杂度

**删除用户**userdel lisi

​	->user -r lisi 删除用户同时删除用户主目录

**查看用户信息**id lisi

**切换用户**su zhangsan

​	->权限降级可以直接切换，切换高权限用户需要密码



#### 组的管理

类似用户的角色

每个用户至少属于一个组，也可以属于多个组

新建用户如果不指定组，则会新建一个组名跟用户名相同的组，并将该用户添加到其中

**创建组**groupadd 组名

**删除组**groupdel 组名

**把用户添加到组中** gpasswd -a 用户名 组名

gpassword -a zhangsan dev

**把用户从组中移除**gpasswd -d 用户名 组名

**添加用户时指定所属的主组**useradd -g 组名 用户名



####  系统操作命令

**关机**：shutdown now 立即关机

**定时关机**：shutdown -h xxx 定时关机

**立即重启**：shutdown -r now 立即重启

**重启**：reboot 立即重启

reboot是快速地删除进程，而不是平稳地终止它们，多人操作可能引起数据的丢失，所以一般在单用户使用

**同步数据库：**sync



#### linux帮助命令

**查看linux系统手册上帮助信息**： man 命令 如 man ls

**查看命令的内置帮助信息**：help 命令



####  *文件和目录操作的命令

##### **查看当前所在目录**

pwd

##### **查看指定目录下所有子目录和文件列表**

ls [指定目录]

ls -a [指定目录] 显示包括虚拟目录

ls -l [指定目录] 列表形式显示详细信息

ls -la [指定目录] 列表形式显示详细信息，包括虚拟目录

##### **切换目录**：

cd 目录名

​	->绝对目录  /开始，表示根目录开始，

​						~开始，表示当前用户的根目录开始；

​	->相对目录 当前目录下

​						..为当前目录的上一级目录 cd ..

​						.为当前目录下

##### **创建目录**

mkdir [-p] 目录名

​	**如果加上-p表示创建多级目录** 

​	->相对目录

​	->绝对目录 mkdir /opt/testDir/test1

##### **删除一个空目录**

rmdir 目录名

##### **创建一个或多个空文件**（不打开）

touch 文件列表（空格隔开文件名）

touch t1.txt t2.txt

##### **复制文件**

cp sources（源） dest（目标）

只能复制单个文件或空文件

cp -r source dest

复制多个

##### **删除文件或目录**

rm t1.txt 提示删除

rm -f t2.txt 强制删除（不询问）

##### **以上两个不能删除目录**

rm -r test 提示递归地删除目录

rm -rf test 递归强制删除目录

##### 移动目录或文件

mv source  dest

文件移动到文件里相当于重命名



#### 文件输出流指令

##### 输出系统变量或常量的值

echo $JAVA_HOME

echo $PATH

##### 查看结果输出到文件

命令>文件

如果文件不存在则会新建文件  

若已存在则覆盖文件内容

命令>>文件

如果文件不存在则会新建文件  

若已存在则追加到文件中



#### 时间相关的命令

##### date命令

date（功能描述：显示当前时间） 

date +%Y（功能描述：显示当前年份）

date +%m（功能描述：显示当前月份）

date +%d（功能描述：显示当前是哪一天） 

date "+%Y-%m-%d %H:%M:%S"（功能描述：显示年月日时分秒）

 date -s 字符串时间（功能描述：设置日期）

##### cal命令

cal：查看指定月份的日历（默认当前月份）

cal 2020：查看指定年份的日历



#### 关于搜索的命令

##### find命令

*作为通配符，默认搜索当前目录下（包含子目录下）

find	*.txt

**搜索指定目录下指定大小的文件**

+表示大于，-表示小于

find 文件  -size +5m 

**搜索指定目录下指定所有者的文件**

find 文件  -user zhangsan 

##### locate命令

在目录树中根据名称搜索，效率更高，

但是目录树定时更新，往往不能反映真实情况

所以一般如下执行

updatedb						-----刷新树

locate *.txt

##### 进一步过滤命令

搜索命令|grep [选项] 过滤条件 

查看命令|grep [选项] 过滤条件

选项-i表示忽略大小写，-ni表示显示行号并忽略大小写

find *.txt|grep new 搜索当前目录下名称含有new的txt文件



####  压缩和解压缩命令

#####  压缩或解压单个文件（会删除原来的文件）

gzip 文件名：压缩单个文件，生成一个.gz的压缩包 

gunzip 文件名：解压.gz压缩包

##### 压缩或解压多个文件和目录

zip 目标压缩包名称 文件或者目录列表：可以自己选压缩包名称，通常使用.zip

unzip 文件名 [-d 目录]：解压到当前目录下,可选解压到指定目录

##### 压缩或解压多个文件和目录（最常用）

tar [选项] 目标压缩包名称（xxx.tar.gz） 文件或目录列表

->c：打包或压缩

tar [选项] 压缩包名称（xxx.tar.gz）[-C 解压目录名]

这里是大写C

->x：解压

**常见选项**

-c：产生.tar.gz 打包文件 

-v：显示详细信息 

-f：指定压缩后的文件名 

-z：打包同时压缩 

-x：解压.tar.gz 文件

 -C: 指定解压到哪个目录

一般使用为

**打包**：tar -zcvf xxx.tar.gz 文件或目录列表

**解压**：tar -zxvf xxx.tar.gz [-C 解压目录名]



#### 文件与组的权限管理

##### 基本介绍

每个用户必须属于一个或多个组

每个文件属于且只能属于一个组，默认为文件所有者所在主组

文件或者目录通过组来控制哪些用户可以对它进行操作，即访问权限

在文件或目录看来，系统用户分为三类：

所有者（默认情况下创建者即所有者，可以修改）

同组用户（与文件或目录属于同一个组的用户）

其他组用户（不是以上两者的用户）

##### 修改文件所有者

chown [-R] 新的所有者 文件名

chown [-R] 新的所有者:新的组 文件名	

加参数-R表示递归地修改

##### 修改文件所在组

chgrp 新的组 文件名或者目录名

##### 文件或目录的三种权限

**对于文件而言**

读（Read）可以读取、查看文件的内容，比如：cat、more、less、head 、tail等

写（Write）可以修改文件的内容，比如vi、vim等

执行（Execute）可以运行可执行文件（.sh），比如./xxx.sh

**对于目录而言**

读（Read）可以读取、查看目录下的内容

写（Write）可以修改目录中的内容，创建子目录，删除子目录，创建文件删除文件等

执行（Execute）可以进入该目录，比如cd等



**文件或者目录的权限控制**

任何一个文件或目录都具有三部分权限：

**所有者权限：**

文件或目录的所有者对该文件所拥有的权限，使用r、w、x分别表示读、写、执行的权限

**同组用户权限**：

文件或目录的同组用户对该文件拥有的权限

**其他组用户权限**：

其他组用户对该文件具有的权限



#####   修改文件或者目录的权限

**方式一：**

chmod 用户范围 [+或-或=] [权限]

例如：chmod g -w,o +r,a =r-x 	t4.txt

 用r、w、x分别表示读、写、执行的权限；

用u、g、o、a分别表示所有者、同组用户、其他组用户、所有用户权限

**方式二：**

**使用数字表示权限**：r(4)	w(2)	x(1);

每种权限都可以用一组数据之和来表示，比如rwx就是7



#### Linux的网络管理

**linux的配置文件**：vi或vim /etc/sysconfig/network-scripts/ifcfg-ens33

BOOTPROTO="static"
ONBOOT="yes"

**以下三个设置去虚拟网络编辑器中查看**

IPADDR=192.168.127.131

GATEWAY=192.168.127.2

DNS1=192.168.127.2



**主机ping不通虚拟机问题**

将ip地址设置与电脑控制面板中vm8地址一致即可

1、win下cmd输入ipconfig查看vm8的ip是不是和linux的ip相同。2、改完网络设置后VM8禁用再重启即可完美解决。

**外界无法ping通Linux记得关闭Linux防火墙**



#### Linux中的进程管理

**线程**：一个程序的执行线路

**进程**：一个程序的执行 ，一个进程占用一个端口

**查看进程**：ps

ps	只显示应用进程

ps -e	显示所有进程

ps -ef	以全格式的形式显示所有进程

用于查看linux系统中某些软件是否处于启动状态

ps -er |grep  tomcat		使用grep命令过滤出特定进程



#### Linux中服务管理

**服务**：服务是支持Linux正常运行的一些必要程序，本质上也是进程，叫守护进程

**操作服务**：systemctl    [start|stop|restart|reload|status|enable]	服务名称

老版Linux或者有些发行版本的Linux，操作服务使用service命令



#### Linux中软件包的管理——软件安装包

**RPM包**

一种Linux软件安装和打包工具，它操作的软件包都是.rpm包结尾

RPM包已经成为一种标准

**使用RPM**：rpm命令

**查看当前系统已经安装的rpm软件包**：rpm -qa|grep firefox

**卸载rpm软件包**：rpm -e|grep firefox

**安装rpm包**：rpm -ivh xxx.rpm

**一般拷贝到opt目录下安装**:	cp xxx.rpm /opt		rpm -ivh xxx.rpm



**YUM包管理**

一种基于RPM的软件包管理工具，它能够从指定服务器上自动下载RPM包并且自动安装，可以自动处理软件包之间的依赖关系

**查看当前系统已经安装的RPM包**：yum list installed|grep firefox

**卸载RPM：**yum remove xxx

**安装RPM包：**yum install firefox



#### 常见问题：

##### **ens33网卡没有ip地址**

systemctl stop NetworkManager

systemctl disable NetworkManager

systemctl restart network

##### 右上角不显示网络连接：

启动：service NetworkManager start

开机自启动：systemctl enable NetworkManager



/opt/tomcat-8.5.35/bin/startup.sh

